<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gi·ªè h√†ng c·ªßa b·∫°n</title>
    <link rel="stylesheet" href="../../css/bootstrap.min.css">
    <script src="../../js/jquery.min.js"></script>
    <script src="../../js/bootstrap.min.js"></script>
    <script src="../../js/product.js"></script> 
</head>
<body>

<div class="container" style="margin-top: 50px;">
    <h2 class="text-center">üõí GI·ªé H√ÄNG C·ª¶A B·∫†N</h2>
    <br>
    
    <table class="table table-bordered table-hover">
        <thead>
            <tr class="info">
                <th>H√¨nh ·∫£nh</th>
                <th>T√™n s·∫£n ph·∫©m</th>
                <th>Gi√°</th>
                <th>S·ªë l∆∞·ª£ng</th>
                <th>Th√†nh ti·ªÅn</th>
                <th>H√†nh ƒë·ªông</th>
            </tr>
        </thead>
        <tbody id="cart-body">
            </tbody>
        <tfoot>
            <tr>
                <td colspan="4" class="text-right"><strong>T·ªîNG C·ªòNG:</strong></td>
                <td colspan="2" style="color: red; font-size: 18px; font-weight: bold;" id="tong-tien">0ƒë</td>
            </tr>
        </tfoot>
    </table>

    <div class="text-right">
        <a href="../../index.html" class="btn btn-default">Ti·∫øp t·ª•c mua h√†ng</a>
        <button onclick="thanhToan()" class="btn btn-success">‚úî THANH TO√ÅN NGAY</button>
    </div>
</div>

<script>
    // --- PH·∫¶N HI·ªÇN TH·ªä D·ªÆ LI·ªÜU RA M√ÄN H√åNH ---
    
    // 1. L·∫•y d·ªØ li·ªáu
    const gioHang = JSON.parse(localStorage.getItem('gioHang')) || [];
    const tbody = document.getElementById('cart-body');
    const tongTienEl = document.getElementById('tong-tien');
    let tongTien = 0;

    // 2. Ki·ªÉm tra n·∫øu gi·ªè r·ªóng
    if (gioHang.length === 0) {
        tbody.innerHTML = '<tr><td colspan="6" class="text-center">Gi·ªè h√†ng ƒëang tr·ªëng! H√£y ƒëi mua s·∫Øm n√†o.</td></tr>';
    } else {
        // 3. Duy·ªát qua t·ª´ng s·∫£n ph·∫©m ƒë·ªÉ v·∫Ω d√≤ng (Row)
        gioHang.forEach(sp => {
            let thanhTien = sp.gia * sp.soLuong;
            tongTien += thanhTien;

            let row = `
                <tr>
                    <td><img src="${sp.hinh}" width="50"></td>
                    <td>${sp.ten}</td>
                    <td>${sp.gia.toLocaleString('vi-VN')}ƒë</td>
                    <td><input type="number" value="${sp.soLuong}" min="1" style="width: 50px" disabled></td>
                    <td>${thanhTien.toLocaleString('vi-VN')}ƒë</td>
                    <td>
                        <button class="btn btn-danger btn-sm" onclick="xoaKhoiGio('${sp.ten}')">X√≥a</button>
                    </td>
                </tr>
            `;
            tbody.innerHTML += row;
        });
    }

    // 4. Hi·ªÉn th·ªã t·ªïng ti·ªÅn
    tongTienEl.innerText = tongTien.toLocaleString('vi-VN') + 'ƒë';

    // 5. H√†m gi·∫£ l·∫≠p Thanh to√°n
    function thanhToan() {
        if(gioHang.length === 0) {
            alert("Gi·ªè h√†ng tr·ªëng, kh√¥ng th·ªÉ thanh to√°n!");
            return;
        }
        alert("C·∫£m ∆°n b·∫°n ƒë√£ mua h√†ng! ƒê∆°n h√†ng ƒë√£ ƒë∆∞·ª£c g·ª≠i ƒëi.");
        localStorage.removeItem('gioHang'); // X√≥a gi·ªè h√†ng sau khi mua
        location.reload(); // T·∫£i l·∫°i trang
    }
</script>

</body>
</html>